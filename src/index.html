<!DOCTYPE html>
<html>
<head>
    <style>
        :root { --red: #ff4d4d; --dark: #1a1a1a; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--red); display: flex; justify-content: center; align-items: center; height: 100vh; color: #333; overflow: hidden; }
        .card { background: white; padding: 40px; border-radius: 24px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); width: 350px; text-align: center; }
        h2 { color: var(--red); margin-top: 0; }
        input { width: 100%; padding: 12px; margin: 15px 0; border: 2px solid #eee; border-radius: 12px; box-sizing: border-box; font-size: 16px; outline: none; }
        input:focus { border-color: var(--red); }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 14px; transition: 0.3s; }
        .btn-start { background: var(--red); color: white; }
        .btn-stop { background: var(--dark); color: white; margin-top: 10px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="card" id="setup-view">
        <h2>FocusPro ðŸ”’</h2>
        <p>Apps to block (exe names)</p>
        <input id="app-input" placeholder="e.g. chrome.exe">
        <button class="btn btn-start" onclick="addAndStart()">START STRICT MODE</button>
    </div>

    <div class="card hidden" id="focus-view">
        <h1 style="font-size: 60px; margin: 0;">ðŸš«</h1>
        <h2 style="color: var(--dark)">STRICT FOCUS</h2>
        <p>Locked! Password needed to exit.</p>
        <input type="password" id="pass-input" placeholder="Enter Password">
        <button class="btn btn-stop" onclick="unlock()">UNLOCK NOW</button>
    </div>

    <script>
        const { invoke } = window.__TAURI__.tauri;
        let apps = [];

        function addAndStart() {
            let val = document.getElementById('app-input').value;
            if(val) {
                apps.push(val);
                invoke('start_focus', { apps: apps });
                document.getElementById('setup-view').classList.add('hidden');
                document.getElementById('focus-view').classList.remove('hidden');
            } else { alert("Please enter an app name!"); }
        }

        async function unlock() {
            let pass = document.getElementById('pass-input').value;
            let ok = await invoke('stop_focus', { input_pass: pass });
            if(ok) {
                document.getElementById('focus-view').classList.add('hidden');
                document.getElementById('setup-view').classList.remove('hidden');
            } else { alert("Wrong password!"); }
        }
    </script>
</body>
</html>